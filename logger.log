2025/12/15 18:01:26 [INFO] [DB] Database Server running on ('192.168.56.1', 52274)
2025/12/15 18:01:29 [INFO] [Lobby] Lobby Server running on ('192.168.56.1', 52273)
2025/12/15 18:01:34 [INFO] Successfully connected to lobby server 192.168.56.1:52273
2025/12/15 18:01:34 [INFO] [Lobby] Connection from ('192.168.56.1', 57864)
2025/12/15 18:01:34 [INFO] [Lobby] Successfully connected to database server 192.168.56.1:52274
2025/12/15 18:01:34 [INFO] [DB] Connection from ('192.168.56.1', 57865)
2025/12/15 18:01:35 [INFO] [Lobby] Connection from ('192.168.56.1', 57869)
2025/12/15 18:01:35 [INFO] Successfully connected to lobby server 192.168.56.1:52273
2025/12/15 18:01:35 [INFO] [Lobby] Successfully connected to database server 192.168.56.1:52274
2025/12/15 18:01:35 [INFO] [DB] Connection from ('192.168.56.1', 57870)
2025/12/15 18:02:20 [INFO] Successfully connected to lobby server 192.168.56.1:52273
2025/12/15 18:02:20 [INFO] [Lobby] Connection from ('192.168.56.1', 57909)
2025/12/15 18:02:20 [INFO] [Lobby] Successfully connected to database server 192.168.56.1:52274
2025/12/15 18:02:20 [INFO] [DB] Connection from ('192.168.56.1', 57910)
2025/12/15 18:02:26 [INFO] Sent command: REGISTER aa 11
2025/12/15 18:02:26 [INFO] Sent command: REGISTER aa 11
2025/12/15 18:02:26 [INFO] [DB] Received command to register user
.
2025/12/15 18:02:26 [INFO] [DB] Updated data.json successfully.
2025/12/15 18:02:26 [INFO] Sent message: {"sender": "database", "status": "success", "message": "REGISTRATION_SUCCESS", "params": []}

2025/12/15 18:02:26 [INFO] [DB] User aa registered successfully.
2025/12/15 18:02:26 [INFO] Sent message: {"sender": "lobby", "status": "success", "message": "REGISTRATION_SUCCESS", "params": []}

2025/12/15 18:02:29 [INFO] Sent command: LOGIN aa 11
2025/12/15 18:02:29 [INFO] Sent command: LOGIN aa 11 192.168.56.1 57864
2025/12/15 18:02:29 [INFO] [Lobby] Sent command to login user aa.
2025/12/15 18:02:29 [INFO] [DB] Received command to login user
2025/12/15 18:02:29 [INFO] [DB] Login acquired online_users_lock
2025/12/15 18:02:29 [INFO] [DB] Login released online_users_lock
2025/12/15 18:02:29 [INFO] Sent message: {"sender": "database", "status": "success", "message": "LOGIN_SUCCESS", "params": []}

2025/12/15 18:02:29 [INFO] User aa logged in successfully.
2025/12/15 18:02:29 [INFO] Sent message: {"sender": "lobby", "status": "success", "message": "LOGIN_SUCCESS", "params": []}

2025/12/15 18:02:33 [INFO] Sent command: REGISTER aa 11
2025/12/15 18:02:33 [INFO] Sent command: REGISTER aa 11
2025/12/15 18:02:33 [INFO] [DB] Received command to register user
2025/12/15 18:02:33 [INFO] [Lobby] Sent command to register user aa.
2025/12/15 18:02:33 [INFO] Sent message: {"sender": "database", "status": "error", "message": "Username exists, please choose a new one.", "params": []}

2025/12/15 18:02:33 [INFO] Sent message: {"sender": "lobby", "status": "error", "message": "\nError: Username exists, please choose a new one.\n", "params": []}

2025/12/15 18:02:36 [INFO] Sent command: REGISTER bb 22
2025/12/15 18:02:36 [INFO] Sent command: REGISTER bb 22
2025/12/15 18:02:36 [INFO] [Lobby] Sent command to register user bb.
2025/12/15 18:02:36 [INFO] [DB] Received command to register user
2025/12/15 18:02:36 [INFO] [DB] Updated data.json successfully.
2025/12/15 18:02:36 [INFO] Sent message: {"sender": "database", "status": "success", "message": "REGISTRATION_SUCCESS", "params": []}

2025/12/15 18:02:36 [INFO] [DB] User bb registered successfully.
2025/12/15 18:02:36 [INFO] Sent message: {"sender": "lobby", "status": "success", "message": "REGISTRATION_SUCCESS", "params": []}

2025/12/15 18:02:41 [INFO] Sent command: LOGIN bb 22
2025/12/15 18:02:41 [INFO] Sent command: LOGIN bb 22 192.168.56.1 57869
2025/12/15 18:02:41 [INFO] [Lobby] Sent command to login user bb.
2025/12/15 18:02:41 [INFO] [DB] Received command to login user
2025/12/15 18:02:41 [INFO] [DB] Login acquired online_users_lock
2025/12/15 18:02:41 [INFO] [DB] Login released online_users_lock
2025/12/15 18:02:41 [INFO] Sent message: {"sender": "database", "status": "success", "message": "LOGIN_SUCCESS", "params": []}

2025/12/15 18:02:41 [INFO] User bb logged in successfully.
2025/12/15 18:02:41 [INFO] Sent message: {"sender": "lobby", "status": "success", "message": "LOGIN_SUCCESS", "params": []}

2025/12/15 18:02:44 [INFO] Sent command: LOGIN cc 33
2025/12/15 18:02:44 [INFO] Sent command: LOGIN cc 33 192.168.56.1 57909
2025/12/15 18:02:44 [INFO] [Lobby] Sent command to login user cc.
2025/12/15 18:02:44 [INFO] [DB] Received command to login user
2025/12/15 18:02:44 [INFO] [DB] Login acquired online_users_lock
2025/12/15 18:02:44 [INFO] [DB] Login released online_users_lock
2025/12/15 18:02:44 [INFO] Sent message: {"sender": "database", "status": "success", "message": "LOGIN_SUCCESS", "params": []}

2025/12/15 18:02:44 [INFO] User cc logged in successfully.
2025/12/15 18:02:44 [INFO] Sent message: {"sender": "lobby", "status": "success", "message": "LOGIN_SUCCESS", "params": []}

2025/12/15 18:02:50 [INFO] Sent command: CREATE_ROOM public
2025/12/15 18:02:50 [INFO] Sent command: CREATE_ROOM aa public
2025/12/15 18:02:50 [INFO] [DB] Received command to create room
2025/12/15 18:02:50 [INFO] [DB] Create room acquired online_users_lock
2025/12/15 18:02:50 [INFO] [DB] Create room released online_users_lock
2025/12/15 18:02:50 [INFO] Sent message: {"sender": "database", "status": "success", "message": "CREATE_ROOM_SUCCESS 282659", "params": ["282659", "public"]}

2025/12/15 18:02:50 [INFO] [DB] User aa created room 282659
2025/12/15 18:02:50 [INFO] [DB] Waiting for another player to join room 282659
2025/12/15 18:02:50 [INFO] Sent message: {"sender": "lobby", "status": "success", "message": "CREATE_ROOM_SUCCESS 282659", "params": []}

2025/12/15 18:02:57 [INFO] Sent command: SHOW_STATUS 
2025/12/15 18:02:57 [INFO] Sent command: SHOW_STATUS bb
2025/12/15 18:02:57 [INFO] [DB] Show invites acquired online_users_lock
2025/12/15 18:02:57 [INFO] [DB] Show invites released online_users_lock
2025/12/15 18:02:57 [INFO] Sent message: {"sender": "database", "status": "status", "message": "------ List of Rooms ------\nRoom ID: 282659 | Creator: aa | Status: waiting\n----------------------------\n\n--- List of Online Users ---\nUser: aa - Status: in_room\nUser: bb - Status: idle\nUser: cc - Status: idle\n----------------------------", "params": []}

2025/12/15 18:02:57 [INFO] [DB] Sending SHOW_STATUS message to user
2025/12/15 18:02:57 [INFO] Sent message: {"sender": "lobby", "status": "status", "message": "------ List of Rooms ------\nRoom ID: 282659 | Creator: aa | Status: waiting\n----------------------------\n\n--- List of Online Users ---\nUser: aa - Status: in_room\nUser: bb - Status: idle\nUser: cc - Status: idle\n----------------------------", "params": []}

2025/12/15 18:03:30 [INFO] Sent command: CREATE_ROOM private
2025/12/15 18:03:30 [INFO] Sent command: CREATE_ROOM cc private
2025/12/15 18:03:30 [INFO] [DB] Received command to create room
2025/12/15 18:03:30 [INFO] [DB] Create room acquired online_users_lock
2025/12/15 18:03:30 [INFO] [DB] Create room released online_users_lock
2025/12/15 18:03:30 [INFO] Sent message: {"sender": "database", "status": "success", "message": "CREATE_ROOM_SUCCESS 108615", "params": ["108615", "private"]}

2025/12/15 18:03:30 [INFO] [DB] User cc created room 108615
2025/12/15 18:03:30 [INFO] [DB] Waiting for another player to join room 108615
2025/12/15 18:03:30 [INFO] Sent message: {"sender": "lobby", "status": "success", "message": "CREATE_ROOM_SUCCESS 108615", "params": []}

2025/12/15 18:03:33 [INFO] Sent command: SHOW_STATUS 
2025/12/15 18:03:33 [INFO] Sent command: SHOW_STATUS aa
2025/12/15 18:03:33 [INFO] [DB] Show invites acquired online_users_lock
2025/12/15 18:03:33 [INFO] [DB] Show invites released online_users_lock
2025/12/15 18:03:33 [INFO] Sent message: {"sender": "database", "status": "status", "message": "------ List of Rooms ------\nRoom ID: 282659 | Creator: aa | Status: waiting\n----------------------------\n\n--- List of Online Users ---\nUser: aa - Status: in_room\nUser: bb - Status: idle\nUser: cc - Status: in_room\n----------------------------", "params": []}

2025/12/15 18:03:33 [INFO] [DB] Sending SHOW_STATUS message to user
2025/12/15 18:03:33 [INFO] Sent message: {"sender": "lobby", "status": "status", "message": "------ List of Rooms ------\nRoom ID: 282659 | Creator: aa | Status: waiting\n----------------------------\n\n--- List of Online Users ---\nUser: aa - Status: in_room\nUser: bb - Status: idle\nUser: cc - Status: in_room\n----------------------------", "params": []}

2025/12/15 18:03:51 [INFO] Sent command: INVITE_PLAYER bb 108615
2025/12/15 18:03:51 [INFO] Sent command: INVITE_PLAYER bb 108615 cc
2025/12/15 18:03:51 [INFO] [DB] Invite player acquired online_users_lock
2025/12/15 18:03:51 [INFO] [DB] Invite player released online_users_lock
2025/12/15 18:03:51 [INFO] Sent message: {"sender": "database", "status": "success", "message": "INVITE_SENT bb 108615", "params": []}

2025/12/15 18:03:51 [INFO] [DB] User cc invited bb to join room: 108615
2025/12/15 18:03:51 [INFO] [DB] Invite player acquired online_users_lock
2025/12/15 18:03:51 [INFO] Sent message: {"sender": "lobby", "status": "invite", "message": "cc 108615", "params": []}

2025/12/15 18:03:51 [INFO] Sent message: {"sender": "lobby", "status": "success", "message": "INVITE_SENT bb 108615", "params": []}

2025/12/15 18:03:51 [INFO] [DB] Invite player released online_users_lock
2025/12/15 18:03:59 [INFO] Sent command: INVITE_PLAYER bb 282659
2025/12/15 18:03:59 [INFO] Sent command: INVITE_PLAYER bb 282659 aa
2025/12/15 18:03:59 [INFO] [DB] Invite player acquired online_users_lock
2025/12/15 18:03:59 [INFO] [DB] Invite player released online_users_lock
2025/12/15 18:03:59 [INFO] Sent message: {"sender": "database", "status": "success", "message": "INVITE_SENT bb 282659", "params": []}

2025/12/15 18:03:59 [INFO] [DB] User aa invited bb to join room: 282659
2025/12/15 18:03:59 [INFO] [DB] Invite player acquired online_users_lock
2025/12/15 18:03:59 [INFO] Sent message: {"sender": "lobby", "status": "invite", "message": "aa 282659", "params": []}

2025/12/15 18:03:59 [INFO] Sent message: {"sender": "lobby", "status": "success", "message": "INVITE_SENT bb 282659", "params": []}

2025/12/15 18:03:59 [INFO] [DB] Invite player released online_users_lock
2025/12/15 18:04:01 [INFO] Sent command: JOIN_ROOM 282659check
2025/12/15 18:04:01 [INFO] Sent command: JOIN_ROOM 282659check bb
2025/12/15 18:04:01 [INFO] Sent message: {"sender": "database", "status": "error", "message": "Room does not exist", "params": []}

2025/12/15 18:04:01 [INFO] Sent message: {"sender": "lobby", "status": "error", "message": "\nError: Room does not exist\n", "params": []}

2025/12/15 18:04:04 [INFO] Sent command: CHECK 
2025/12/15 18:04:04 [INFO] Sent command: CHECK bb
2025/12/15 18:04:04 [INFO] [DB] Show invites acquired online_users_lock
2025/12/15 18:04:04 [INFO] [DB] Show invites released online_users_lock
2025/12/15 18:04:04 [INFO] Sent message: {"sender": "database", "status": "status", "message": "------ List of Invites ------\nRoom ID: 108615 | Inviter: cc\nRoom ID: 282659 | Inviter: aa\n----------------------------\nYou can accept invites with the \"accept\" command.", "params": []}

2025/12/15 18:04:04 [INFO] [DB] Sending CHECK message to user
2025/12/15 18:04:04 [INFO] Sent message: {"sender": "lobby", "status": "status", "message": "------ List of Invites ------\nRoom ID: 108615 | Inviter: cc\nRoom ID: 282659 | Inviter: aa\n----------------------------\nYou can accept invites with the \"accept\" command.", "params": []}

2025/12/15 18:04:18 [INFO] Sent command: ACCEPT aa 282659
2025/12/15 18:04:18 [INFO] Sent command: ACCEPT aa 282659 bb
2025/12/15 18:04:18 [INFO] [DB] Accept invite acquired online_users_lock
2025/12/15 18:04:18 [INFO] [DB] Accept invite released online_users_lock
2025/12/15 18:04:18 [INFO] Sent message: {"sender": "database", "status": "success", "message": "JOIN_ROOM_SUCCESS 282659", "params": ["282659", ["aa", "bb"], "public"]}

2025/12/15 18:04:18 [INFO] [DB] Player bb has joined room 282659
2025/12/15 18:04:18 [INFO] Sent message: {"sender": "lobby", "status": "success", "message": "JOIN_ROOM_SUCCESS 282659", "params": []}

2025/12/15 18:04:18 [INFO] [Game] Game server started for room 282659 on port 52314
2025/12/15 18:04:18 [INFO] [Lobby] Started game server for room 282659 on port 52314
2025/12/15 18:04:18 [INFO] Sent message: {"status": "p2p_info", "role": "P1", "room_id": "282659", "game_type": "tetris", "game_host": "192.168.56.1", "game_port": 52314}
2025/12/15 18:04:18 [INFO] Sent message: {"status": "p2p_info", "role": "P2", "room_id": "282659", "game_type": "tetris", "game_host": "192.168.56.1", "game_port": 52314}
2025/12/15 18:04:18 [INFO] [Lobby] Central game server info sent for room 282659
2025/12/15 18:04:18 [INFO] Connecting to central game server 192.168.56.1:52314 for room 282659
2025/12/15 18:04:18 [INFO] Connecting to central game server 192.168.56.1:52314 for room 282659
2025/12/15 18:04:18 [INFO] Initiating game for room 282659...
2025/12/15 18:04:18 [INFO] Initiating game for room 282659...
2025/12/15 18:04:18 [INFO] Connecting to game server at 192.168.56.1:52314... [Attempt 1]
2025/12/15 18:04:18 [INFO] Connected to game server at 192.168.56.1:52314
2025/12/15 18:04:18 [INFO] Connected to game server at 192.168.56.1:52314
2025/12/15 18:04:18 [INFO] Sent message: {"type": "JOIN", "username": "bb"}
2025/12/15 18:04:18 [INFO] Sent JOIN message with username: bb
2025/12/15 18:04:18 [INFO] Sent message: {"type": "JOIN", "username": "aa"}
2025/12/15 18:04:18 [INFO] [Game] Player bb (P1_282659) connected from ('192.168.56.1', 49671)
2025/12/15 18:04:18 [INFO] [Game] Player aa (P2_282659) connected from ('192.168.56.1', 49672)
2025/12/15 18:04:18 [INFO] Sent message: {"type": "WELCOME", "role": "P2", "seed": 781464, "bagRule": "7bag", "gravityPlan": {"mode": "timed_step", "dropMs": 500, "stepMs": 450, "intervalMs": 60000}}
2025/12/15 18:04:18 [INFO] [Game] Sent WELCOME to aa
2025/12/15 18:04:18 [INFO] Received WELCOME - Role: P2, Seed: 781464
2025/12/15 18:04:18 [INFO] Sent message: {"type": "READY", "username": "aa"}
2025/12/15 18:04:18 [INFO] Sent READY signal to game server
2025/12/15 18:04:18 [INFO] [Game] Player aa ready (1/2)
2025/12/15 18:04:18 [INFO] Sent message: {"type": "WELCOME", "role": "P1", "seed": 781464, "bagRule": "7bag", "gravityPlan": {"mode": "timed_step", "dropMs": 500, "stepMs": 450, "intervalMs": 60000}}
2025/12/15 18:04:18 [INFO] [Game] Sent WELCOME to bb
2025/12/15 18:04:18 [INFO] Received WELCOME - Role: P1, Seed: 781464
2025/12/15 18:04:18 [INFO] Sent message: {"type": "READY", "username": "bb"}
2025/12/15 18:04:18 [INFO] Sent READY signal to game server
2025/12/15 18:04:18 [INFO] [Game] Player bb ready (2/2)
2025/12/15 18:04:18 [INFO] [Game] Room 282659 game starting
2025/12/15 18:04:28 [INFO] Sent message: {"type": "INPUT", "action": "RIGHT", "seq": 1, "ts": 1765793068516}
2025/12/15 18:04:28 [INFO] Sent message: {"type": "INPUT", "action": "RIGHT", "seq": 2, "ts": 1765793068665}
2025/12/15 18:04:28 [INFO] Sent message: {"type": "INPUT", "action": "RIGHT", "seq": 3, "ts": 1765793068831}
2025/12/15 18:04:28 [INFO] Sent message: {"type": "INPUT", "action": "RIGHT", "seq": 4, "ts": 1765793068961}
2025/12/15 18:04:29 [INFO] Sent message: {"type": "INPUT", "action": "RIGHT", "seq": 5, "ts": 1765793069109}
2025/12/15 18:04:30 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 1, "ts": 1765793070419}
2025/12/15 18:04:30 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 2, "ts": 1765793070569}
2025/12/15 18:04:30 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 3, "ts": 1765793070733}
2025/12/15 18:04:30 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 4, "ts": 1765793070961}
2025/12/15 18:04:32 [INFO] Sent message: {"type": "INPUT", "action": "CW", "seq": 5, "ts": 1765793072207}
2025/12/15 18:04:32 [INFO] Sent message: {"type": "INPUT", "action": "CW", "seq": 6, "ts": 1765793072504}
2025/12/15 18:04:32 [INFO] Sent message: {"type": "INPUT", "action": "CW", "seq": 7, "ts": 1765793072751}
2025/12/15 18:04:36 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 8, "ts": 1765793076424}
2025/12/15 18:04:36 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 9, "ts": 1765793076696}
2025/12/15 18:04:36 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 10, "ts": 1765793076894}
2025/12/15 18:04:37 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 11, "ts": 1765793077062}
2025/12/15 18:04:37 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 12, "ts": 1765793077226}
2025/12/15 18:04:37 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 13, "ts": 1765793077390}
2025/12/15 18:04:37 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 14, "ts": 1765793077605}
2025/12/15 18:04:37 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 15, "ts": 1765793077820}
2025/12/15 18:04:38 [INFO] Sent message: {"type": "INPUT", "action": "RIGHT", "seq": 16, "ts": 1765793078774}
2025/12/15 18:04:41 [INFO] Sent message: {"type": "INPUT", "action": "RIGHT", "seq": 17, "ts": 1765793081905}
2025/12/15 18:04:42 [INFO] Sent message: {"type": "INPUT", "action": "RIGHT", "seq": 18, "ts": 1765793082089}
2025/12/15 18:04:48 [INFO] Sent message: {"type": "INPUT", "action": "HARD_DROP", "seq": 19, "ts": 1765793088463}
2025/12/15 18:04:49 [INFO] Sent message: {"type": "INPUT", "action": "CW", "seq": 20, "ts": 1765793089784}
2025/12/15 18:04:50 [INFO] Sent message: {"type": "INPUT", "action": "CW", "seq": 21, "ts": 1765793090153}
2025/12/15 18:04:50 [INFO] Sent message: {"type": "INPUT", "action": "RIGHT", "seq": 22, "ts": 1765793090581}
2025/12/15 18:04:51 [INFO] Sent message: {"type": "INPUT", "action": "HARD_DROP", "seq": 23, "ts": 1765793091650}
2025/12/15 18:05:18 [INFO] Sent message: {"type": "TEMPO", "dropMs": 450, "ts": 1765793118496}
2025/12/15 18:05:18 [INFO] Sent message: {"type": "TEMPO", "dropMs": 450, "ts": 1765793118496}
2025/12/15 18:05:56 [INFO] Sent message: {"type": "END", "winner": "P1_282659", "reason": "opponent_topped_out", "results": [{"userId": "P1_282659", "score": 0, "lines": 0, "gameOver": false}, {"userId": "P2_282659", "score": 34, "lines": 0, "gameOver": true}], "duration": 97.64257764816284}
2025/12/15 18:05:56 [INFO] Sent message: {"type": "END", "winner": "P1_282659", "reason": "opponent_topped_out", "results": [{"userId": "P1_282659", "score": 0, "lines": 0, "gameOver": false}, {"userId": "P2_282659", "score": 34, "lines": 0, "gameOver": true}], "duration": 97.64257764816284}
2025/12/15 18:05:56 [INFO] [Game] Game ended. Winner: P1_282659. Results: [{'userId': 'P1_282659', 'score': 0, 'lines': 0, 'gameOver': False}, {'userId': 'P2_282659', 'score': 34, 'lines': 0, 'gameOver': True}]
2025/12/15 18:05:56 [INFO] [Game] Player aa (P2_282659) disconnected
2025/12/15 18:05:56 [INFO] [Game] Player bb (P1_282659) disconnected
2025/12/15 18:06:01 [INFO] Disconnected from game server
2025/12/15 18:06:01 [INFO] Sent command: GAME_OVER 
2025/12/15 18:06:01 [INFO] [Lobby] Stopped game server for room 282659
2025/12/15 18:06:01 [INFO] [Lobby] User bb has ended the game and is now idle.
2025/12/15 18:06:01 [INFO] Disconnected from game server
2025/12/15 18:06:01 [INFO] Sent command: GAME_OVER 
2025/12/15 18:06:01 [INFO] [Lobby] User aa has ended the game and is now idle.
2025/12/15 18:06:27 [INFO] Sent command: INVITE_PLAYER bb 282659
2025/12/15 18:06:27 [INFO] Sent command: INVITE_PLAYER bb 282659 aa
2025/12/15 18:06:27 [INFO] Sent message: {"sender": "database", "status": "error", "message": "Room is full", "params": []}

2025/12/15 18:06:27 [INFO] Sent message: {"sender": "lobby", "status": "error", "message": "\nError: Room is full\n", "params": []}

2025/12/15 18:06:44 [INFO] Sent command: CHECK 
2025/12/15 18:06:44 [INFO] Sent command: CHECK bb
2025/12/15 18:06:44 [INFO] [DB] Show invites acquired online_users_lock
2025/12/15 18:06:44 [INFO] [DB] Show invites released online_users_lock
2025/12/15 18:06:44 [INFO] Sent message: {"sender": "database", "status": "status", "message": "------ List of Invites ------\nRoom ID: 108615 | Inviter: cc\n----------------------------\nYou can accept invites with the \"accept\" command.", "params": []}

2025/12/15 18:06:44 [INFO] [DB] Sending CHECK message to user
2025/12/15 18:06:44 [INFO] Sent message: {"sender": "lobby", "status": "status", "message": "------ List of Invites ------\nRoom ID: 108615 | Inviter: cc\n----------------------------\nYou can accept invites with the \"accept\" command.", "params": []}

2025/12/15 18:07:00 [INFO] Sent command: ACCEPT cc 108615
2025/12/15 18:07:00 [INFO] Sent command: ACCEPT cc 108615 bb
2025/12/15 18:07:00 [INFO] [DB] Accept invite acquired online_users_lock
2025/12/15 18:07:00 [INFO] [DB] Accept invite released online_users_lock
2025/12/15 18:07:00 [INFO] Sent message: {"sender": "database", "status": "success", "message": "JOIN_ROOM_SUCCESS 108615", "params": ["108615", ["cc", "bb"], "private"]}

2025/12/15 18:07:00 [INFO] [DB] Player bb has joined room 108615
2025/12/15 18:07:00 [INFO] Sent message: {"sender": "lobby", "status": "success", "message": "JOIN_ROOM_SUCCESS 108615", "params": []}

2025/12/15 18:07:00 [INFO] [Game] Game server started for room 108615 on port 52295
2025/12/15 18:07:00 [INFO] [Lobby] Started game server for room 108615 on port 52295
2025/12/15 18:07:00 [INFO] Sent message: {"status": "p2p_info", "role": "P1", "room_id": "108615", "game_type": "tetris", "game_host": "192.168.56.1", "game_port": 52295}
2025/12/15 18:07:00 [INFO] Sent message: {"status": "p2p_info", "role": "P2", "room_id": "108615", "game_type": "tetris", "game_host": "192.168.56.1", "game_port": 52295}
2025/12/15 18:07:00 [INFO] [Lobby] Central game server info sent for room 108615
2025/12/15 18:07:00 [INFO] Connecting to central game server 192.168.56.1:52295 for room 108615
2025/12/15 18:07:00 [INFO] Initiating game for room 108615...
2025/12/15 18:07:00 [INFO] Connecting to game server at 192.168.56.1:52295... [Attempt 1]
2025/12/15 18:07:00 [INFO] Connecting to game server at 192.168.56.1:52295... [Attempt 1]
2025/12/15 18:07:00 [INFO] Connected to game server at 192.168.56.1:52295
2025/12/15 18:07:00 [INFO] Connected to game server at 192.168.56.1:52295
2025/12/15 18:07:00 [INFO] Sent message: {"type": "JOIN", "username": "bb"}
2025/12/15 18:07:00 [INFO] Sent message: {"type": "JOIN", "username": "cc"}
2025/12/15 18:07:00 [INFO] [Game] Player bb (P1_108615) connected from ('192.168.56.1', 50449)
2025/12/15 18:07:00 [INFO] Sent JOIN message with username: cc
2025/12/15 18:07:00 [INFO] Sent JOIN message with username: bb
2025/12/15 18:07:00 [INFO] [Game] Player cc (P2_108615) connected from ('192.168.56.1', 50450)
2025/12/15 18:07:00 [INFO] Sent message: {"type": "WELCOME", "role": "P2", "seed": 729353, "bagRule": "7bag", "gravityPlan": {"mode": "timed_step", "dropMs": 500, "stepMs": 450, "intervalMs": 60000}}
2025/12/15 18:07:00 [INFO] [Game] Sent WELCOME to cc
2025/12/15 18:07:00 [INFO] Received WELCOME - Role: P2, Seed: 729353
2025/12/15 18:07:00 [INFO] Sent message: {"type": "READY", "username": "cc"}
2025/12/15 18:07:00 [INFO] Sent READY signal to game server
2025/12/15 18:07:00 [INFO] [Game] Player cc ready (1/2)
2025/12/15 18:07:00 [INFO] Sent message: {"type": "WELCOME", "role": "P1", "seed": 729353, "bagRule": "7bag", "gravityPlan": {"mode": "timed_step", "dropMs": 500, "stepMs": 450, "intervalMs": 60000}}
2025/12/15 18:07:00 [INFO] [Game] Sent WELCOME to bb
2025/12/15 18:07:00 [INFO] Received WELCOME - Role: P1, Seed: 729353
2025/12/15 18:07:00 [INFO] Sent message: {"type": "READY", "username": "bb"}
2025/12/15 18:07:00 [INFO] Sent READY signal to game server
2025/12/15 18:07:00 [INFO] [Game] Player bb ready (2/2)
2025/12/15 18:07:00 [INFO] [Game] Room 108615 game starting
2025/12/15 18:07:05 [INFO] Sent message: {"type": "INPUT", "action": "RIGHT", "seq": 1, "ts": 1765793225659}
2025/12/15 18:07:05 [INFO] Sent message: {"type": "INPUT", "action": "RIGHT", "seq": 2, "ts": 1765793225872}
2025/12/15 18:07:06 [INFO] Sent message: {"type": "INPUT", "action": "RIGHT", "seq": 3, "ts": 1765793226057}
2025/12/15 18:07:06 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 4, "ts": 1765793226289}
2025/12/15 18:07:06 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 5, "ts": 1765793226436}
2025/12/15 18:07:08 [INFO] Sent message: {"type": "INPUT", "action": "HARD_DROP", "seq": 6, "ts": 1765793228678}
2025/12/15 18:07:15 [INFO] Sent message: {"type": "INPUT", "action": "HOLD", "seq": 7, "ts": 1765793235364}
2025/12/15 18:07:17 [INFO] Sent message: {"type": "INPUT", "action": "HOLD", "seq": 8, "ts": 1765793237310}
2025/12/15 18:07:20 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 1, "ts": 1765793240371}
2025/12/15 18:07:20 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 2, "ts": 1765793240544}
2025/12/15 18:07:20 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 3, "ts": 1765793240695}
2025/12/15 18:07:20 [INFO] Sent message: {"type": "INPUT", "action": "LEFT", "seq": 4, "ts": 1765793240859}
2025/12/15 18:07:28 [INFO] Sent message: {"type": "INPUT", "action": "HARD_DROP", "seq": 9, "ts": 1765793248377}
2025/12/15 18:07:30 [INFO] Sent message: {"type": "INPUT", "action": "HOLD", "seq": 10, "ts": 1765793250112}
2025/12/15 18:07:31 [INFO] Sent message: {"type": "INPUT", "action": "HARD_DROP", "seq": 11, "ts": 1765793251420}
2025/12/15 18:07:33 [INFO] Sent message: {"type": "INPUT", "action": "HOLD", "seq": 12, "ts": 1765793253069}
2025/12/15 18:07:34 [INFO] Sent message: {"type": "INPUT", "action": "CW", "seq": 13, "ts": 1765793254123}
2025/12/15 18:07:34 [INFO] Sent message: {"type": "INPUT", "action": "CW", "seq": 14, "ts": 1765793254306}
2025/12/15 18:07:35 [INFO] Sent message: {"type": "INPUT", "action": "HARD_DROP", "seq": 15, "ts": 1765793255555}
2025/12/15 18:07:40 [INFO] Sent message: {"type": "INPUT", "action": "HARD_DROP", "seq": 16, "ts": 1765793260934}
2025/12/15 18:07:42 [INFO] Sent message: {"type": "INPUT", "action": "HARD_DROP", "seq": 17, "ts": 1765793262776}
2025/12/15 18:07:42 [INFO] Sent message: {"type": "INPUT", "action": "HARD_DROP", "seq": 18, "ts": 1765793262943}
2025/12/15 18:07:43 [INFO] Sent message: {"type": "INPUT", "action": "HARD_DROP", "seq": 19, "ts": 1765793263110}
2025/12/15 18:07:43 [INFO] Sent message: {"type": "INPUT", "action": "HARD_DROP", "seq": 20, "ts": 1765793263259}
2025/12/15 18:07:43 [INFO] Sent message: {"type": "INPUT", "action": "HARD_DROP", "seq": 21, "ts": 1765793263387}
2025/12/15 18:07:43 [INFO] Sent message: {"type": "INPUT", "action": "HARD_DROP", "seq": 22, "ts": 1765793263517}
2025/12/15 18:07:43 [INFO] Sent message: {"type": "INPUT", "action": "HARD_DROP", "seq": 23, "ts": 1765793263650}
2025/12/15 18:07:43 [INFO] Sent message: {"type": "END", "winner": "P2_108615", "reason": "opponent_topped_out", "results": [{"userId": "P1_108615", "score": 150, "lines": 0, "gameOver": true}, {"userId": "P2_108615", "score": 0, "lines": 0, "gameOver": false}], "duration": 43.48467016220093}
2025/12/15 18:07:43 [INFO] Sent message: {"type": "END", "winner": "P2_108615", "reason": "opponent_topped_out", "results": [{"userId": "P1_108615", "score": 150, "lines": 0, "gameOver": true}, {"userId": "P2_108615", "score": 0, "lines": 0, "gameOver": false}], "duration": 43.48467016220093}
2025/12/15 18:07:43 [INFO] [Game] Game ended. Winner: P2_108615. Results: [{'userId': 'P1_108615', 'score': 150, 'lines': 0, 'gameOver': True}, {'userId': 'P2_108615', 'score': 0, 'lines': 0, 'gameOver': False}]
2025/12/15 18:07:43 [INFO] [Game] Player cc (P2_108615) disconnected
2025/12/15 18:07:43 [INFO] [Game] Player bb (P1_108615) disconnected
2025/12/15 18:07:48 [INFO] Disconnected from game server
2025/12/15 18:07:48 [INFO] Sent command: GAME_OVER 
2025/12/15 18:07:48 [INFO] [Lobby] Stopped game server for room 108615
2025/12/15 18:07:48 [INFO] [Lobby] User cc has ended the game and is now idle.
2025/12/15 18:07:48 [INFO] Disconnected from game server
2025/12/15 18:07:48 [INFO] Sent command: GAME_OVER 
2025/12/15 18:07:48 [INFO] [Lobby] User bb has ended the game and is now idle.
2025/12/15 18:08:05 [INFO] Sent command: CREATE_ROOM public
2025/12/15 18:08:05 [INFO] Sent command: CREATE_ROOM aa public
2025/12/15 18:08:05 [INFO] [DB] Received command to create room
2025/12/15 18:08:05 [INFO] [DB] Create room acquired online_users_lock
2025/12/15 18:08:05 [INFO] [DB] Create room released online_users_lock
2025/12/15 18:08:05 [INFO] Sent message: {"sender": "database", "status": "success", "message": "CREATE_ROOM_SUCCESS 584462", "params": ["584462", "public"]}

2025/12/15 18:08:05 [INFO] [DB] User aa created room 584462
2025/12/15 18:08:05 [INFO] [DB] Waiting for another player to join room 584462
2025/12/15 18:08:05 [INFO] Sent message: {"sender": "lobby", "status": "success", "message": "CREATE_ROOM_SUCCESS 584462", "params": []}

2025/12/15 18:08:10 [INFO] Sent command: JOIN_ROOM 584462
2025/12/15 18:08:10 [INFO] Sent command: JOIN_ROOM 584462 bb
2025/12/15 18:08:10 [INFO] [DB] Join room released online_users_lock
2025/12/15 18:08:10 [INFO] Sent message: {"sender": "database", "status": "success", "message": "JOIN_ROOM_SUCCESS 584462", "params": ["584462", ["aa", "bb"], "public"]}

2025/12/15 18:08:10 [INFO] [DB] User bb has joined room 584462
2025/12/15 18:08:10 [INFO] Sent message: {"sender": "lobby", "status": "success", "message": "JOIN_ROOM_SUCCESS 584462", "params": []}

2025/12/15 18:08:10 [INFO] [Game] Game server started for room 584462 on port 52291
2025/12/15 18:08:10 [INFO] [Lobby] Started game server for room 584462 on port 52291
2025/12/15 18:08:10 [INFO] Sent message: {"status": "p2p_info", "role": "P1", "room_id": "584462", "game_type": "tetris", "game_host": "192.168.56.1", "game_port": 52291}
2025/12/15 18:08:10 [INFO] Sent message: {"status": "p2p_info", "role": "P2", "room_id": "584462", "game_type": "tetris", "game_host": "192.168.56.1", "game_port": 52291}
2025/12/15 18:08:10 [INFO] [Lobby] Central game server info sent for room 584462
2025/12/15 18:08:10 [INFO] Connecting to central game server 192.168.56.1:52291 for room 584462
2025/12/15 18:08:10 [INFO] Connecting to central game server 192.168.56.1:52291 for room 584462
2025/12/15 18:08:10 [INFO] Initiating game for room 584462...
2025/12/15 18:08:10 [INFO] Connecting to game server at 192.168.56.1:52291... [Attempt 1]
2025/12/15 18:08:10 [INFO] Connected to game server at 192.168.56.1:52291
2025/12/15 18:08:10 [INFO] Sent message: {"type": "JOIN", "username": "aa"}
2025/12/15 18:08:10 [INFO] Sent message: {"type": "JOIN", "username": "bb"}
2025/12/15 18:08:10 [INFO] Sent JOIN message with username: bb
2025/12/15 18:08:10 [INFO] Sent JOIN message with username: aa
2025/12/15 18:08:10 [INFO] [Game] Player aa (P1_584462) connected from ('192.168.56.1', 50507)
2025/12/15 18:08:10 [INFO] [Game] Player bb (P2_584462) connected from ('192.168.56.1', 50506)
2025/12/15 18:08:10 [INFO] Sent message: {"type": "WELCOME", "role": "P2", "seed": 933282, "bagRule": "7bag", "gravityPlan": {"mode": "timed_step", "dropMs": 500, "stepMs": 450, "intervalMs": 60000}}
2025/12/15 18:08:10 [INFO] [Game] Sent WELCOME to bb
2025/12/15 18:08:10 [INFO] Received WELCOME - Role: P2, Seed: 933282
2025/12/15 18:08:10 [INFO] Sent message: {"type": "READY", "username": "bb"}
2025/12/15 18:08:10 [INFO] Sent READY signal to game server
2025/12/15 18:08:10 [INFO] [Game] Player bb ready (1/2)
2025/12/15 18:08:10 [INFO] Sent message: {"type": "WELCOME", "role": "P1", "seed": 933282, "bagRule": "7bag", "gravityPlan": {"mode": "timed_step", "dropMs": 500, "stepMs": 450, "intervalMs": 60000}}
2025/12/15 18:08:10 [INFO] [Game] Sent WELCOME to aa
2025/12/15 18:08:10 [INFO] Received WELCOME - Role: P1, Seed: 933282
2025/12/15 18:08:10 [INFO] Sent message: {"type": "READY", "username": "aa"}
2025/12/15 18:08:10 [INFO] Sent READY signal to game server
2025/12/15 18:08:10 [INFO] [Game] Room 584462 game starting
2025/12/15 18:08:14 [INFO] Sent command: WATCH 584462
2025/12/15 18:08:14 [INFO] Sent message: {"status": "watch_info", "room_id": "584462", "game_host": "192.168.56.1", "game_port": 52291}
2025/12/15 18:08:14 [INFO] Watching central game server 192.168.56.1:52291 for room 584462
2025/12/15 18:08:14 [INFO] Initiating watch session for room 584462...
2025/12/15 18:08:14 [INFO] Connecting to game server at 192.168.56.1:52291... [Attempt 1]
2025/12/15 18:08:14 [INFO] Connected to game server at 192.168.56.1:52291
2025/12/15 18:08:14 [INFO] Sent message: {"type": "WATCH", "username": "cc", "roomId": "584462"}
2025/12/15 18:08:14 [INFO] Sent WATCH message with username: cc
2025/12/15 18:08:14 [INFO] Sent message: {"type": "WELCOME", "role": "WATCHER", "roomId": "584462", "seed": 933282, "bagRule": "7bag", "gravityPlan": {"mode": "timed_step", "dropMs": 500, "stepMs": 450, "intervalMs": 60000}, "players": ["aa", "bb"]}
2025/12/15 18:08:14 [INFO] [Game] Watcher cc connected from ('192.168.56.1', 50512)
2025/12/15 18:08:14 [INFO] Received WELCOME - Role: WATCHER, Seed: 933282
2025/12/15 18:08:27 [INFO] Disconnected from game server
2025/12/15 18:08:27 [ERROR] [Network] Failed to receive message: [WinError 64] 指定的網路名稱無法使用。
2025/12/15 18:08:27 [INFO] Sent command: GAME_OVER 
2025/12/15 18:08:27 [INFO] [Lobby] Stopped game server for room 584462
2025/12/15 18:08:27 [INFO] [Lobby] User aa has ended the game and is now idle.
2025/12/15 18:08:29 [INFO] [Network] Connection closed by peer
2025/12/15 18:08:29 [INFO] [Game] Watcher cc disconnected
2025/12/15 18:08:29 [INFO] Disconnected from game server
2025/12/15 18:08:29 [INFO] [Network] Connection closed by peer
2025/12/15 18:08:29 [INFO] Disconnected from game server
2025/12/15 18:08:29 [INFO] Sent command: GAME_OVER 
2025/12/15 18:08:29 [INFO] [Lobby] User bb has ended the game and is now idle.
2025/12/15 18:10:13 [INFO] [Network] Connection closed by peer
2025/12/15 18:10:13 [INFO] [Lobby] Client from  ('192.168.56.1', 57864) disconnected
2025/12/15 18:10:13 [INFO] Sent command: SERVER_CLOSED aa
2025/12/15 18:10:13 [INFO] [DB] Close server released online_users_lock
2025/12/15 18:10:13 [INFO] [DB] Successfully disconnected client aa
2025/12/15 18:10:13 [INFO] [Network] Connection closed by peer
2025/12/15 18:10:13 [INFO] [DB] Connection closed by ('192.168.56.1', 57865)
2025/12/15 18:10:17 [ERROR] Error when sending command: 
2025/12/15 18:10:17 [INFO] [Network] Connection closed by peer
2025/12/15 18:10:17 [INFO] [Lobby] Client from  ('192.168.56.1', 57869) disconnected
2025/12/15 18:10:17 [INFO] Sent command: SERVER_CLOSED bb
2025/12/15 18:10:17 [INFO] [DB] Close server released online_users_lock
2025/12/15 18:10:17 [INFO] [DB] Successfully disconnected client bb
2025/12/15 18:10:17 [INFO] [Network] Connection closed by peer
2025/12/15 18:10:17 [INFO] [DB] Connection closed by ('192.168.56.1', 57870)
2025/12/15 18:10:18 [INFO] [Network] Connection closed by peer
2025/12/15 18:10:18 [INFO] [Lobby] Client from  ('192.168.56.1', 57909) disconnected
2025/12/15 18:10:18 [INFO] Sent command: SERVER_CLOSED cc
2025/12/15 18:10:18 [INFO] [DB] Close server released online_users_lock
2025/12/15 18:10:18 [INFO] [DB] Successfully disconnected client cc
2025/12/15 18:10:18 [INFO] [Network] Connection closed by peer
2025/12/15 18:10:18 [INFO] [DB] Connection closed by ('192.168.56.1', 57910)
2025/12/15 18:10:23 [INFO] [DB] Database server is closed.
